use std::collections::HashMap;
use regex::Regex;

pub fn counting_words(words: &str) -> HashMap<String, u32> {
    // regex يسمح بكلمات مكونة من أحرف أو أرقام + كلمات فيها apostrophe زي "I'm"
    let re = Regex::new(r"\b[\w]+(?:'[a-zA-Z]+)?\b").unwrap();

    let mut counts = HashMap::new();

    for mat in re.find_iter(words) {
        let word = mat.as_str().to_lowercase();
        *counts.entry(word).or_insert(0) += 1;
    }

    counts
}
